<!-- form start -->
<%= form_with(model: store, local: true) do |form| %>
  <div class="box-body">
    <% if store.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(store.errors.count, "error") %>
          prohibited this store from being saved:
        </h2>

        <ul>
          <% store.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>


    <div class="form-group">
      <%= form.label :name, '*商铺名：' %>
      <%= form.text_field :name, id: :store_name, class: 'form-control' %>
    </div>

    <div class="form-group">
      <%= form.label :intro, '*商铺介绍：' %>
      <%= form.text_field :intro, id: :store_intro, class: 'form-control' %>
    </div>

    <% if current_user.admin? %>
      <div class="form-group">
        <%= form.label :user_id, '*商铺老板：' %>
        <%= form.collection_select(:user_id, User.all, :id, :email,
                                   {include_blank: false},
                                   {class: 'form-control'}) %>
      </div>
    <% end %>


    <div class="form-group">
      <%= form.fields_for :pictures do |picture| %>
        <%= render 'picture_fields', f: picture %>
      <% end %>
      <div class="links">
        <%= link_to_add_association('添加一张图片', form, :pictures,
                                    class: 'btn btn-outline-dark') %>
      </div>
    </div>

    <div class="box-footer text-right">
      <div class="btn-group" role="group">
        <%= form.submit '确认再添加一个', class: 'btn btn-outline-info' %>
        <%= form.submit '确 认', class: 'btn btn-outline-info mx-2' %>
      </div>
    </div>
<% end %>
</div>

